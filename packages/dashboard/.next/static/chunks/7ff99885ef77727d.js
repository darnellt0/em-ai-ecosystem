(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2846,e=>{"use strict";var s=e.i(47167),t=e.i(43476),a=e.i(71645);let l=s.default.env.NEXT_PUBLIC_API_BASE_URL||"";async function c(e,s){let t=await fetch(`${l}${e}`,{...s,headers:{"Content-Type":"application/json",...s?.headers||{}}});if(!t.ok)throw Error(`Request failed: ${t.status}`);return t.json()}function n(){let[e,s]=(0,a.useState)("darnell"),[l,n]=(0,a.useState)("Elevated Movements strengths story"),[i,d]=(0,a.useState)(!0),[r,o]=(0,a.useState)([]),[h,x]=(0,a.useState)(null),[m,p]=(0,a.useState)(!1),[u,j]=(0,a.useState)(null),N=async()=>{try{j(null);let e=await c("/api/content/packs");o(e.packs||[])}catch(e){j(e.message)}};(0,a.useEffect)(()=>{N()},[]);let b=async()=>{p(!0),j(null);try{await c("/api/content/packs/generate",{method:"POST",body:JSON.stringify({userId:e,topic:l,includeP0:i})}),await N()}catch(e){j(e.message)}finally{p(!1)}},f=async e=>{try{let s=await c(`/api/content/packs/${e}`);x(s.pack)}catch(e){j(e.message)}};return(0,t.jsxs)("main",{className:"p-6 space-y-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold",children:"Content Pipeline (PLAN-only)"}),u&&(0,t.jsx)("div",{className:"text-red-600",children:u}),(0,t.jsxs)("section",{className:"space-y-3 border p-4 rounded-md",children:[(0,t.jsx)("h2",{className:"font-semibold",children:"Generate Pack"}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("input",{className:"border p-2",value:e,onChange:e=>s(e.target.value),placeholder:"userId"}),(0,t.jsx)("input",{className:"border p-2",value:l,onChange:e=>n(e.target.value),placeholder:"topic"}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:i,onChange:e=>d(e.target.checked)}),"Include P0 Daily Focus"]}),(0,t.jsx)("button",{className:"bg-blue-600 text-white px-3 py-2 rounded",onClick:b,disabled:m,children:m?"Generating...":"Generate Pack"})]})]}),(0,t.jsxs)("section",{className:"space-y-3 border p-4 rounded-md",children:[(0,t.jsx)("h2",{className:"font-semibold",children:"Existing Packs"}),(0,t.jsx)("button",{className:"underline text-blue-600",onClick:N,children:"Refresh"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left",children:"PackId"}),(0,t.jsx)("th",{className:"text-left",children:"Created"}),(0,t.jsx)("th",{className:"text-left",children:"Topic"}),(0,t.jsx)("th",{className:"text-left",children:"Status"})]})}),(0,t.jsxs)("tbody",{children:[r.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>f(e.packId),children:[(0,t.jsx)("td",{children:e.packId}),(0,t.jsx)("td",{children:e.createdAt}),(0,t.jsx)("td",{children:e.topic}),(0,t.jsx)("td",{children:e.status})]},e.packId)),0===r.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"text-gray-500",children:"No packs yet."})})]})]})})]}),h&&(0,t.jsxs)("section",{className:"space-y-3 border p-4 rounded-md",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"font-semibold",children:["Pack Detail: ",h.packId]}),(0,t.jsx)("button",{className:"underline",onClick:()=>{if(!h)return;let e=new Blob([JSON.stringify(h,null,2)],{type:"application/json"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=`${h.packId}.json`,t.click(),URL.revokeObjectURL(s)},children:"Download JSON"})]}),(0,t.jsxs)("div",{className:"text-sm",children:["Topic: ",h.topic]}),(0,t.jsxs)("div",{className:"text-sm",children:["Status: ",h.status]}),(0,t.jsxs)("div",{className:"text-sm",children:["Planned Actions: ",h.plannedActionIds?.length||0]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"Assets"}),h.assets?.map(e=>(0,t.jsxs)("div",{className:"border p-2 rounded",children:[(0,t.jsx)("div",{className:"text-xs uppercase text-gray-500",children:e.channel}),(0,t.jsx)("div",{className:"font-semibold",children:e.title}),(0,t.jsx)("pre",{className:"whitespace-pre-wrap text-xs",children:e.body})]},e.id))]})]})]})}e.s(["default",()=>n])}]);